<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Registrations</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #ffffff; }
    header { background: yellow; height: 60px; display: flex; align-items: center; padding-left: 10px; font-weight: bold; font-size: 18px; color: #000; }
    .green-bar { background: #00b050; height: 40px; }
    h2 { text-align: center; margin: 20px 0; font-size: 22px; }
    form { width: 80%; margin: auto; }
    .section { margin-bottom: 20px; }
    h3 { margin-bottom: 10px; font-size: 18px; }
    label { display: inline-block; width: 180px; margin-bottom: 10px; }
    input[type="text"], input[type="email"], select { padding: 5px; width: 250px; }
    .gender label, .checkbox-group label { width: auto; margin-right: 15px; }
    .logo { text-align: center; margin: 20px 0; }
    .submit-btn { display: block; margin: 30px auto; padding: 12px 30px; background: #00b050; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; font-weight: bold; }
    footer { height: 20px; display: flex; }
    .blue-bar { background: #0070c0; flex: 1; }
    .red-bar { background: #c00000; flex: 1; }

    /* Flash message styles */
    .flash-messages { width: 80%; margin: 20px auto; text-align: center; }
    .flash-messages p { font-weight: bold; font-size: 14px; margin: 5px 0; }
  </style>
</head>
<body>
  <header>SYSTEM@TECH LEARNING MANAGEMENT SYSTEM</header>
  <div class="green-bar"></div>
  <h2>Registrations</h2>

  <!-- Flash Messages -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="flash-messages">
        {% for category, message in messages %}
          <p style="color: {% if category == 'error' %}red{% else %}green{% endif %};">
            {{ message }}
          </p>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <form method="POST" id="registrationForm">
    <!-- ROLE -->
    <div class="section">
      <h3>ROLE</h3>
      <label>Select Role:</label>
      <select name="role" required>
        <option value="">--Select--</option>
        <option value="Student">Student</option>
        <option value="Tutor">Tutor</option>
      </select>
    </div>

    <!-- CONTACT DETAILS -->
    <div class="section">
      <h3>CONTACT DETAILS</h3>
      <label>Preferred Name :</label>
      <input type="text" name="fullname" required><br>

      <label>Date of Birth :</label>
      <input type="text" name="dob_day" placeholder="DD" size="2" required> /
      <input type="text" name="dob_month" placeholder="MM" size="2" required> /
      <input type="text" name="dob_year" placeholder="YYYY" size="4" required><br>

      <label>Email :</label>
      <input type="email" name="email" required><br>

      <label>Gender :</label>
      <div class="gender">
        <label><input type="radio" name="gender" value="Male" required> Male</label>
        <label><input type="radio" name="gender" value="Female"> Female</label>
      </div>
    </div>

    <!-- SUBJECT PREFERENCE -->
    <div class="section">
      <h3>SUBJECT PREFERENCE</h3>
      <div class="checkbox-group" id="subjectGroup">
        <label><input type="checkbox" name="subject" value="STEM"> STEM</label>
        <label><input type="checkbox" name="subject" value="Robotics and Programming"> Robotics and Programming</label>
        <label><input type="checkbox" name="subject" value="Calligraphy"> Calligraphy</label>
        <label><input type="checkbox" name="subject" value="NAPLAN/VCE/Scholarship"> NAPLAN/VCE/Scholarship</label>
      </div>
    </div>

    <!-- LOCATION PREFERENCE -->
    <div class="section">
      <h3>LOCATION PREFERENCE</h3>
      <div class="checkbox-group" id="locationGroup">
        <label><input type="checkbox" name="location" value="Derrimut"> Derrimut</label>
        <label><input type="checkbox" name="location" value="Williams Landing"> Williams Landing</label>
        <label><input type="checkbox" name="location" value="Online"> Online</label>
      </div>
    </div>

    <!-- LOGO -->
    <div class="logo">
      <img src="{{ url_for('static', filename='system_logo.jpg') }}" alt="Logo">
    </div>

    <button type="submit" class="submit-btn">Book Now</button>
  </form>

  <footer>
    <div class="blue-bar"></div>
    <div class="red-bar"></div>
  </footer>

  <script>
    const form = document.getElementById('registrationForm');
    form.addEventListener('submit', function(e) {
      const inputs = form.querySelectorAll('input[required], select[required]');
      for (let input of inputs) {
        if (!input.value) {
          alert('Please fill out all required fields!');
          input.focus();
          e.preventDefault();
          return;
        }
      }
      const subjects = document.querySelectorAll('#subjectGroup input[type="checkbox"]');
      if (![...subjects].some(cb => cb.checked)) {
        alert('Please select at least one Subject Preference!');
        e.preventDefault();
        return;
      }
      const locations = document.querySelectorAll('#locationGroup input[type="checkbox"]');
      if (![...locations].some(cb => cb.checked)) {
        alert('Please select at least one Location Preference!');
        e.preventDefault();
        return;
      }
    });
  </script>
</body>
</html>
